name: Deploy Docs

# Controls when the workflow will run
on:
# Triggers the workflow on push or pull request events but only for the master and test branches
  push:
    branches:
      - main
      - test
      
# Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

permissions:
  contents: read
  pages: write

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  build-deploy:
    name: Build and deploy docs

    runs-on: ubuntu-latest

    steps:
    # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
      - name: Checkout 🛎️
        uses: actions/checkout@v2

      - name: Set up Python 3 ⚙️ 🐍
        uses: actions/setup-python@v2
        
      - run: pip install --upgrade pip && pip install mkdocs mkdocs-gen-files
      - run: git config user.name 'github-actions[bot]' && git config user.email 'github-actions[bot]@users.noreply.github.com'
      - name: Publish docs
        run: mkdocs gh-deploy

#       - name: Cache dependencies 💾
#         uses: actions/cache@v2
#         with:
#           path: ~/.cache/pip
#           key: ${{ runner.os }}-pip-${{ hashFiles('docs/requirements.txt') }}
#           restore-keys: |
#             ${{ runner.os }}-pip-
#             ${{ runner.os }}-

#       - name: Install dependencies 🔧
#         working-directory: docs
#         run: make install

#       - name: Build and deploy to GitHub Pages 🏗️ 🚀
#         working-directory: docs
#         run: make deploy
